<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Dashboard</title>
    <link rel="stylesheet" type="text/css" href="/static/engineer/css/orders_style.css">

</head>

<body>
    <header>
        <nav>
            <a href="/">
                <div class="logo" id="logo">
                    <h1 id="initials">FS</h1>
                    <h1 id="title">Material<br>Analysis</h1>
                </div>
            </a>
        </nav>
    </header>
    <main>
        <div class="sidebar">
            <a href="/orders" class="current-page">Order Queue</a>
            <a href="/new_order">New Orders</a>
            <a href="/companies">Company Accounts</a>
            <a href="/contacts">Contact List</a>

        </div>

        <div class="main-content">

            <section class="section" id="my-queue">
                <div class="card card--pad">
                    <h1 class="h1">My Queue</h1>

                    <table class="table" id="orders-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Lamella Count</th>
                                <th>Status</th>
                                <th>Due Date</th>
                            </tr>
                        </thead>
                        <tbody id="order-tbody">
                            <!-- Order Row -->
                            <tr class="order-row" data-order="101">
                                <td class="mono">101</td>
                                <td>Yan Xu</td>
                                <td>3</td>
                                <td><span class="badge badge--progress">In-Progress</span></td>
                                <td>11-12-2025</td>
                            </tr>

                            <!-- Expandable Details Row -->
                            <tr class="order-details">
                                <td colspan="5">
                                    <div class="split open">
                                        <!-- Lamella List -->
                                        <div class="lamella-list">
                                            <button class="lamella-item is-active" data-lamella="10J3-A01">
                                                <span class="id">10J3-A01</span>
                                                <span class="badge badge--progress">In-Progress</span>
                                            </button>

                                            <button class="lamella-item" data-lamella="10J3-A02">
                                                <span class="id">10J3-A02</span>
                                                <span class="badge badge--done">Complete</span>
                                            </button>

                                            <button class="lamella-item" data-lamella="10J3-B03">
                                                <span class="id">10J3-B03</span>
                                                <span class="badge badge--idle">Not Started</span>
                                            </button>
                                        </div>

                                        <!-- Lamella Detail Panel -->
                                        <div class="detail-container">
                                            <div class="detail active" data-lamella="10J3-A01">
                                                <div class="detail__header">
                                                    <div class="detail__title">Lamella 10J3-A01</div>
                                                    <div class="detail__meta">X-Cut</div>
                                                </div>
                                                <!-- List of Steps -->
                                                <div class="steps">
                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">Coating</div>
                                                            <div class="badge badge--done">Complete</div>
                                                            <div class="tool mono">SP01</div>
                                                            <div><a href="#" class="notes-link">Attempts (1)</a></div>
                                                        </div>
                                                        <div class="step-details-container open">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Pass</th>
                                                                            <th>TimeStamp</th>
                                                                            <th>Operator</th>
                                                                            <th>Recipe</th>

                                                                            <th>Notes</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>&check;</td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0730</span>
                                                                            </td>
                                                                            <td>A.Hennegan</td>
                                                                            <td>Iridium 5</td>

                                                                            <td>3nm of Ir</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <div class="attempt-btn-container">
                                                                <button class="attempt-btn">&plus; Attempt</button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">Cut</div>
                                                            <div class="badge badge--done">Complete</div>
                                                            <div class="tool mono">SM404</div>
                                                            <div><a href="#" class="notes-link">Attempts (1)</a></div>
                                                        </div>
                                                        <div class="step-details-container">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Pass</th>
                                                                            <th>TimeStamp</th>
                                                                            <th>Operator</th>
                                                                            <th>Notes</th>

                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>&#10003;
                                                                            </td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0830</span>
                                                                            <td>A.Hennegan</td>
                                                                            <td>No issues.</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                            <div class="attempt-btn-container">
                                                                <button class="attempt-btn">&plus; Attempt</button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">Thin</div>
                                                            <div class="badge badge--progress">In-Progress</div>
                                                            <div class="tool mono">SM404</div>
                                                            <div><a href="#" class="notes-link">Attempts (2)</a></div>
                                                        </div>
                                                        <div class="step-details-container">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>

                                                                            <th>Pass</th>
                                                                            <th>Timestamp</th>
                                                                            <th>Operator</th>
                                                                            <th>Notes</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>

                                                                            <td>&times;
                                                                            </td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0900</span>
                                                                            <td>A.Hennegan</td>
                                                                            <td>Miscleaved. Went too thin.</td>
                                                                        </tr>
                                                                        <tr>

                                                                            <td>&check;</td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0930</span>
                                                                            <td>A.Hennegan</td>

                                                                            <td></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                            <div class="attempt-btn-container">
                                                                <button class="attempt-btn">&plus; Attempt</button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">30kV STEM</div>
                                                            <div class="badge badge--idle">Not-Started</div>
                                                            <div class="tool mono"></div>
                                                            <div><a href="#" class="notes-link">Attempts (0)</a></div>
                                                        </div>
                                                        <div class="step-details-container">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Operator</th>
                                                                            <th>Started</th>
                                                                            <th>Complete</th>
                                                                            <th>Notes</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td> </td>
                                                                            <td> </td>
                                                                            <td> <span class="datetime"></span></td>
                                                                            <td> </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                            <div class="attempt-btn-container">
                                                                <button class="attempt-btn">&plus; Attempt</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="detail" data-lamella="10J3-A02">
                                                <div class="detail__header">
                                                    <div class="detail__title">Lamella 10J3-A01</div>
                                                    <div class="detail__meta">X-Cut</div>
                                                </div>


                                                <div class="steps">
                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">Coating</div>
                                                            <div class="badge badge--done">Complete</div>
                                                            <div class="tool mono">SP01</div>
                                                            <div><a href="#" class="notes-link">Attempts (1)</a></div>
                                                        </div>
                                                        <div class="step-details-container">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Pass</th>
                                                                            <th>TimeStamp</th>
                                                                            <th>Operator</th>
                                                                            <th>Recipe</th>

                                                                            <th>Notes</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>&check;</td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0730</span>
                                                                            </td>
                                                                            <td>A.Hennegan</td>
                                                                            <td>Iridium 5</td>

                                                                            <td>3nm of Ir</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">Cut</div>
                                                            <div class="badge badge--done">Complete</div>
                                                            <div class="tool mono">SM404</div>
                                                            <div><a href="#" class="notes-link">Attempts (1)</a></div>
                                                        </div>
                                                        <div class="step-details-container">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Pass</th>
                                                                            <th>TimeStamp</th>
                                                                            <th>Operator</th>
                                                                            <th>Notes</th>

                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td>&#10003;
                                                                            </td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0830</span>
                                                                            <td>A.Hennegan</td>
                                                                            <td>No issues.</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">Thin</div>
                                                            <div class="badge badge--progress">In-Progress</div>
                                                            <div class="tool mono">SM404</div>
                                                            <div><a href="#" class="notes-link">Attempts (2)</a></div>
                                                        </div>
                                                        <div class="step-details-container">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>

                                                                            <th>Pass</th>
                                                                            <th>Timestamp</th>
                                                                            <th>Operator</th>
                                                                            <th>Notes</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>

                                                                            <td>&times;
                                                                            </td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0900</span>
                                                                            <td>A.Hennegan</td>
                                                                            <td>Miscleaved. Went too thin.</td>
                                                                        </tr>
                                                                        <tr>

                                                                            <td>&check;</td>
                                                                            <td><span class="datetime">11-15-25
                                                                                    0930</span>
                                                                            <td>A.Hennegan</td>

                                                                            <td></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="step-container">
                                                        <div class="step">
                                                            <div class="name">30kV STEM</div>
                                                            <div class="badge badge--idle">Not-Started</div>
                                                            <div class="tool mono"></div>
                                                            <div><a href="#" class="notes-link">Attempts (0)</a></div>
                                                        </div>
                                                        <div class="step-details-container">
                                                            <div class="step-details">
                                                                <table class="coating-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Operator</th>
                                                                            <th>Started</th>
                                                                            <th>Complete</th>
                                                                            <th>Notes</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>
                                                                            <td> </td>
                                                                            <td> </td>
                                                                            <td> <span class="datetime"></span></td>
                                                                            <td> </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- Example second order -->
                            <tr class="order-row" data-order="102">
                                <td class="mono">102</td>
                                <td>Larry Fitzgerald</td>
                                <td>2</td>
                                <td><span class="badge badge--idle">Not Started</span></td>
                                <td>11-15-2025</td>
                            </tr>

                            <tr class="order-details">
                                <td colspan="5">
                                    <div class="split">
                                        <div class="lamella-list">
                                            <button class="lamella-item" data-lamella="80R5-A01">
                                                <span class="id">80R5-A01</span>
                                                <span class="badge badge--idle">Not Started</span>
                                            </button>
                                            <button class="lamella-item" data-lamella="10J3-A02">
                                                <span class="id">80R5-A02</span>
                                                <span class="badge badge--done">Complete</span>
                                            </button>
                                        </div>
                                        <div class="detail-container">
                                            <div class="detail" data-lamella="80R5-A01">
                                                <div class="detail__header">
                                                    <div class="detail__title">Lamella 80R5-A01</div>
                                                    <div class="detail__meta">Y-Cut</div>
                                                </div>
                                                <div class="steps">
                                                    <div class="step">
                                                        <div class="name">Coating</div>
                                                        <div class="badge badge--idle">Not Started</div>
                                                        <div class="tool mono"></div>
                                                        <div><a href="#" class="notes-link">Notes (1)</a></div>
                                                    </div>

                                                    <div class="step">
                                                        <div class="name">Cut</div>
                                                        <div class="badge badge--idle">Not Started</div>
                                                        <div class="tool mono"></div>
                                                        <div><a href="#" class="notes-link">Notes (0)</a></div>
                                                    </div>

                                                    <div class="step">
                                                        <div class="name">Thin</div>
                                                        <div class="badge badge--idle">Not Started</div>
                                                        <div class="tool mono"></div>
                                                        <div><a href="#" class="notes-link">Notes (0)</a></div>
                                                    </div>

                                                    <div class="step">
                                                        <div class="name">TEM</div>
                                                        <div class="badge badge--idle">Not Started</div>
                                                        <div class="tool mono"></div>
                                                        <div><a href="#" class="notes-link">Notes (0)</a></div>
                                                    </div>
                                                    <div class="step">
                                                        <div class="name">EELS</div>
                                                        <div class="badge badge--idle">Not Started</div>
                                                        <div class="tool mono"></div>
                                                        <div><a href="#" class="notes-link">Notes (0)</a></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <section class="section" id="templates">
                <template id="tpl-orderRow">
                    <tr class="order-row">
                        <td class="order-id mono"></td>
                        <td class="customer"></td>
                        <td class="total-lamella"></td>
                        <td class="status"><span class="badge badge--progress"></span></td>
                        <td class="due-date"></td>
                    </tr>
                    <tr class="order-details">
                        <td colspan="5">
                            <div class="split open">
                                <!-- Lamella List -->
                                <div class="lamella-list">
                                    <!-- Add lamella buttons here -->
                                </div>
                                <!-- Lamella Detail Panel -->
                                <div class="detail-container">
                                    <div class="detail active" data-lamella="">
                                        <div class="detail__header">
                                            <!-- lamella header details go here-->
                                        </div>
                                        <!-- List of Steps -->
                                        <div class="steps">
                                            <!--process steps go here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </template>
                <template id="tpl-lamella-btn">
                    <button class="lamella-item is-active">
                        <span class="id"></span>
                        <span class="badge badge--progress"></span>
                    </button>
                </template>
                <template id="tpl-lamella-steps-header">
                    <div class="detail__title"></div>
                    <div class="detail__meta"></div>
                </template>
                <template id="tpl-lamella-step">
                    <div class="step-container">
                        <div class="step">
                            <div class="name"></div>
                            <div class="badge badge--done"></div>
                            <div class="tool mono"></div>
                            <div><a href="#" class="notes-link"></a></div>
                        </div>
                        <div class="step-details-container open">
                            <div class="step-details">
                                <table class="coating-table">
                                    <thead>
                                        <tr>
                                            <th>Pass</th>
                                            <th>TimeStamp</th>
                                            <th>Operator</th>
                                            <th>Recipe</th>

                                            <th>Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td></td>
                                            <td><span class="datetime">
                                                </span>
                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="attempt-btn-container">
                                <button class="attempt-btn">&plus; Attempt</button>
                            </div>
                        </div>
                    </div>
                </template>
                <template id="tpl-attempt-row">
                    <tr>
                        <td class="pass-fail"></td>
                        <td class="time-stamp"><span class="datetime"></span></td>
                        <td class="operator"></td>
                        <td class="recipe"></td>
                        <td class="notes"></td>
                    </tr>
                </template>
            </section>
        </div>

    </main>
    <footer>
        <p>&copy; 2023 Company Name. All rights reserved.</p>
    </footer>
    <script>
        const tbody = document.getElementById('order-tbody');
        tbody.addEventListener('click', e => {

            // 1) Order row click (expand/collapse lamella section)
            const orderRow = e.target.closest('.order-row');
            if (orderRow) {
                const lamellaContainer = orderRow.nextElementSibling?.querySelector('.split');
                if (!lamellaContainer) return;

                lamellaContainer.classList.toggle('open');
                return;
            }

            // 2) Lamella click
            const lamellaItem = e.target.closest('.lamella-item');
            if (lamellaItem) {
                const lamellaContainer = lamellaItem.closest('.split');
                const itemId = lamellaItem.dataset.lamella;
                const details = lamellaContainer.querySelectorAll('.detail');

                // highlight selected lamella
                lamellaItem.parentElement
                    .querySelectorAll('.is-active')
                    .forEach(b => b.classList.remove('is-active'));

                lamellaItem.classList.add('is-active');

                // show matching detail panel
                details.forEach(panel => {
                    panel.classList.toggle('active', panel.dataset.lamella === itemId);
                });

                return;
            }

            // 3) Step click (inside whichever detail is active)
            const stepRow = e.target.closest('.step');
            if (stepRow) {
                const stepDetails = stepRow.nextElementSibling;
                if (!stepDetails) return;

                stepDetails.classList.toggle('open');
                return;
            }
        });
    </script>

</body>

</html>