<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Engineer Operations</title>
  <link rel="stylesheet" href="/static/engineer/css/engineer_style_clean.css" />
</head>
<body>
  <section class="section">
    <div class="card card--pad">
      <h1 class="h1">My Queue</h1>

      <table class="table" id="orders-table">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Customer</th>
            <th>Lamella Count</th>
            <th>Status</th>
            <th class="right">Due Date</th>
          </tr>
        </thead>
        <tbody id="order-tbody">
          <!-- Order Row -->
          <tr class="order-row" data-order="101">
            <td class="mono">101</td>
            <td>Yan Xu</td>
            <td>3</td>
            <td><span class="badge badge--progress">In-Progress</span></td>
            <td class="right">11-12-2025</td>
          </tr>

          <!-- Expandable Details Row -->
          <tr class="order-details" hidden>
            <td colspan="5">
              <div class="split">
                <!-- Lamella List -->
                <div class="lamella-list">
                  <button class="lamella-item is-active" data-lamella="10J3-A01">
                    <span class="id">10J3-A01</span>
                    <span class="badge badge--progress">In-Progress</span>
                  </button>

                  <button class="lamella-item" data-lamella="10J3-A02">
                    <span class="id">10J3-A02</span>
                    <span class="badge badge--done">Complete</span>
                  </button>

                  <button class="lamella-item" data-lamella="10J3-B03">
                    <span class="id">10J3-B03</span>
                    <span class="badge badge--idle">Not Started</span>
                  </button>
                </div>

                <!-- Lamella Detail Panel -->
                <div class="detail">
                  <div class="detail__header">
                    <div class="detail__title">Lamella 10J3-A01</div>
                    <div class="detail__meta">X-Cut • <span class="badge badge--progress">In-Progress</span> • 72%</div>
                  </div>

                  <div class="steps">
                    <div class="step">
                      <div class="name">Coating</div>
                      <div class="badge badge--done">Complete</div>
                      <div class="tool mono">SP01</div>
                      <div><a href="#" class="notes-link">Notes (1)</a></div>
                    </div>

                    <div class="step">
                      <div class="name">Cut</div>
                      <div class="badge badge--done">Complete</div>
                      <div class="tool mono">SEM401</div>
                      <div><a href="#" class="notes-link">Notes (0)</a></div>
                    </div>

                    <div class="step">
                      <div class="name">Thin</div>
                      <div class="badge badge--progress">In-Progress</div>
                      <div class="tool mono">SEM401</div>
                      <div><a href="#" class="notes-link">Notes (0)</a></div>
                    </div>

                    <div class="step">
                      <div class="name">30kV STEM</div>
                      <div class="badge badge--idle">Not Started</div>
                      <div class="tool mono">STM03</div>
                      <div><a href="#" class="notes-link">Notes (0)</a></div>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>

          <!-- Example second order -->
          <tr class="order-row" data-order="102">
            <td class="mono">102</td>
            <td>Larry Fitzgerald</td>
            <td>2</td>
            <td><span class="badge badge--idle">Not Started</span></td>
            <td class="right">11-15-2025</td>
          </tr>

          <tr class="order-details" hidden>
            <td colspan="5">
              <div class="split">
                <div class="lamella-list">
                  <button class="lamella-item" data-lamella="11A2-A05">
                    <span class="id">11A2-A05</span>
                    <span class="badge badge--idle">Not Started</span>
                  </button>
                </div>

                <div class="detail">
                  <div class="detail__header">
                    <div class="detail__title">Lamella 11A2-A05</div>
                    <div class="detail__meta">Y-Cut • <span class="badge badge--idle">Not Started</span></div>
                  </div>
                  <div class="steps">
                    <div class="step">
                      <div class="name">Coating</div>
                      <div class="badge badge--idle">Not Started</div>
                      <div class="tool mono">SP01</div>
                      <div><a href="#" class="notes-link">Notes (0)</a></div>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <script>
    // Simple toggle for expanding order rows
    document.getElementById('order-tbody').addEventListener('click', e => {
      const row = e.target.closest('.order-row');
      if (!row) return;
      const details = row.nextElementSibling;
      // collapse any open detail panels
      document.querySelectorAll('.order-details:not([hidden])').forEach(r => r.hidden = true);
      details.hidden = !details.hidden;
    });

    // Switch active lamella inside details
    document.addEventListener('click', e => {
      const item = e.target.closest('.lamella-item');
      if (!item) return;
      item.parentElement.querySelectorAll('.is-active').forEach(b => b.classList.remove('is-active'));
      item.classList.add('is-active');
      // Placeholder: update right panel dynamically here if needed
    });
  </script>
</body>
</html>